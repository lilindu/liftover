<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>SchizoLift (genome coordinate conversion for Schizosaccharomyces species)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body { font-family: system-ui, sans-serif; margin: 2rem; }
      .container { max-width: 980px; margin: 0 auto; padding: 0 1rem; }
      textarea { width: 100%; height: 10rem; }
      pre { background: #f6f8fa; padding: 1rem; overflow: auto; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; tab-size: 4; }
      table { width: 100%; border-collapse: collapse; }
      thead th { text-align: left; padding: 4px 8px; border-bottom: 1px solid #eaecef; font-weight: 600; }
      tbody td { padding: 4px 8px; border-bottom: 1px solid #f0f0f0; white-space: nowrap; }
      .row { display: flex; gap: 1rem; align-items: center; flex-wrap: wrap; }
      .status-row { display:flex; gap:12px; flex-wrap:wrap; margin: 6px 0 12px; }
      .status-chip { background:#f3f4f6; border:1px solid #e5e7eb; border-radius:8px; padding:6px 10px; font-size:12px; }
      .btn { border:1px solid #d1d5db; border-radius:6px; padding:8px 12px; background:#fff; cursor:pointer; }
      .btn:hover { background:#f9fafb; }
      .btn-primary { border-color:#6366f1; color:#3730a3; }
      thead th { position: sticky; top: 0; background: #fff; }
      tbody tr:nth-child(odd) { background: #fafafa; }
      td:nth-child(2), td:nth-child(3), td:nth-child(5), td:nth-child(6), td:nth-child(8), td:nth-child(9) { text-align: right; }
      td:last-child, td:nth-child(11) { white-space: normal; word-break: break-word; }
      input[type=file] { margin-bottom: 0.5rem; }
      button { padding: 0.5rem 1rem; }
      .title { font-size: 2.0rem; font-weight: 700; letter-spacing: 0.2px; line-height: 1.2; margin: 0; margin-top: 0.75rem; }
      .subtitle { font-size: 0.95rem; color: #6b7280; margin-top: 4px; }
      .badge { display: inline-block; font-size: 0.8rem; color: #374151; background: #eef2ff; border: 1px solid #c7d2fe; border-radius: 999px; padding: 2px 8px; margin-left: 8px; }
      @media (max-width: 640px) { .title { font-size: 1.6rem; } }
      .note { font-size: 13px; color: #374151; margin: 8px 0 14px; background:#eef2ff; border:1px solid #c7d2fe; border-radius:6px; padding:6px 8px; }
      .doclink { font-size: 0.85rem; margin-left: 10px; color: #2563eb; text-decoration: none; }
      .doclink:hover { text-decoration: underline; }
    </style>
  </head>
  <body class="container">
    <h1 class="title">SchizoLift</h1>
    <div class="subtitle">genome coordinate conversion for <i>Schizosaccharomyces</i> species <span id="versionBadge" class="badge"></span><a class="doclink" href="https://github.com/lilindu/liftover#readme" target="_blank" rel="noopener">Documentation</a></div>
    <div style="border-top:1px solid #eaecef;margin:8px 0 16px;"></div>
    <div style="margin-bottom: 16px;">
      <label for="pairSelector" style="font-weight:600;margin-right:8px;">Select Genome Pair:</label>
      <select id="pairSelector" style="font-size:14px;padding:6px 12px;border-radius:6px;border:1px solid #d1d5db;background:#fff;">
      </select>
    </div>
    <div class="status-row">
      <div id="statusAB" class="status-chip">A→B: not loaded</div>
      <div id="statusBA" class="status-chip">B→A: not loaded</div>
    </div>
    <h3>Input coordinates (one per line, CHR:POS or CHR:START-END; coordinates are 1-based and inclusive)</h3>
    <textarea id="coords" placeholder="I:1000&#10;II:250-400&#10;III:42"></textarea>
    <div class="row">
      <button id="runAB" class="btn btn-primary">Liftover A→B</button>
      <button id="runBA" class="btn btn-primary">Liftover B→A</button>
      <button id="runRoundtrip" class="btn btn-primary">Round-Trip A→B→A</button>
      <button id="download" class="btn btn-primary">Download Results</button>
    </div>
    <h3>Results</h3>
    <div id="resultsHelp" style="background:#f6f8fa;border:1px solid #eaecef;padding:8px;margin:8px 0;font-size:12px;">
      <strong style="display:block;font-size:14px;">Explanation of the output:</strong>
      <span style="display:block;">A = source genome; B = target genome</span>
      <strong>Status:</strong>
      <span style="display:block;">OK = Interval maps within a single block</span>
      <span style="display:block;">SPANNING_BLOCKS = Interval spans multiple blocks; see “gaps” column for details on gaps between blocks</span>
      <span style="display:block;">UNMAPPED = One or both endpoints do not fall in any block</span>
      <span style="display:block;">Round‑Trip: PASS = B→A interval equals original; otherwise FAIL</span>
      <strong style="display:block;">Gaps syntax:</strong>
      <span style="display:block;">GAP_A:N@A:start→end = N bp unaligned bases on A</span>
      <span style="display:block;">GAP_B:N@B:start→end = N bp unaligned bases on B</span>
      <span style="display:block;">OVERLAP_B:N@B:start→end = N bp overlap on B across block boundary</span>
      <span style="display:block;">Round‑Trip columns “gapsAB” and “gapsBA” list gaps seen in each direction</span>
    </div>
    <div id="directionNote" class="note"></div>
    <table id="outTable">
      <thead id="outHead"></thead>
      <tbody id="outBody"></tbody>
    </table>
    <pre id="out" style="display:none"></pre>
    <script src="app.js?v=coord_1based_fix_1"></script>
  </body>
</html>
